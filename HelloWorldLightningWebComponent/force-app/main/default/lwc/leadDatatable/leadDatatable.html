<template>
  <lightning-card title="커스텀 리드 데이터테이블 과제입니다." icon-name="standard:lead">
    <div class="slds-p-left_medium" style="text-align: left;">
      <button class="slds-button slds-button_success" style="color: blue; vertical-align: middle;" onclick={openLeadCreationModal}>
        리드 만들어유~
      </button>
      &nbsp;&nbsp;&nbsp;
      <lightning-input type="search" label="검색" value={searchTerm} onchange={handleSearch} style="display: inline-block; width:40%;"></lightning-input>
    </div>

      <!-- 모달 다이얼로그 구조 -->
      <template if:true={showModal}>
    <div class="slds-modal slds-fade-in-open">
      <div class="slds-modal__container">
          <header class="slds-modal__header">
            <h2 class="slds-text-heading_medium">(환) 리드 생성하는 페이지 (영)</h2>
          </header>
          <div class="slds-modal__content slds-p-around_medium">

            <lightning-input label="성" value={firstName} onchange={handleFirstNameChange}></lightning-input>

            <lightning-input label="이름" name="lastName" value={lastName} onchange={handleLastNameChange}></lightning-input>
              <div class="slds-text-color_error" style="font-size: 8px;">{lastNameError}</div>

            <lightning-input label="회사" value={company} onchange={handleCompanyChange}></lightning-input>
            <lightning-input label="직급" value={title} onchange={handleTitleChange}></lightning-input>

            <lightning-input label="이메일" value={email} onchange={handleEmailChange}></lightning-input>
              <div class="slds-text-color_error" style="font-size: 8px;">{emailError}</div>
              <div class="slds-text-color_success" style="font-size: 8px;">{availableEmail}</div>
              
              <!-- 필드 추가: Rating (선택 목록) -->
              <lightning-combobox
                  label="등급"
                  value={rating}
                  options={ratingOptions}
                  onchange={handleRatingChange}>
              </lightning-combobox>
              <div class="slds-text-color_error" style="font-size: 8px;">{RatingError}</div>
              
              <!-- 필드 추가: Status (선택 목록) -->
              <lightning-combobox
                  label="리드 상태"
                  value={status}
                  options={statusOptions}
                  onchange={handleStatusChange}
                  read-only>
              </lightning-combobox>

              <lightning-combobox
                  label="리드 소스"
                  value={leadSource}
                  options={leadSourceOptions}
                  onchange={handleLeadSourceChange}>
              </lightning-combobox>
              <div class="slds-text-color_error" style="font-size: 8px;">{leadSourceError}</div>

          </div>
          <footer class="slds-modal__footer">
              <lightning-button label="닫아유" onclick={closeModal}></lightning-button>
              <lightning-button label="진짜 만들어유" variant="brand" onclick={createLead}></lightning-button>
          </footer>
      </div>
    </div>
      <div class="slds-backdrop slds-backdrop_open"></div>
    </template>

    <br>
     <span style="font-size : 20px; color:purple; margin-left: 10px;">데이터의 총 개수 : {totalLeadCount}개</span>
    <br>

      <lightning-button
        label={buttonLabel}
        onclick={handleDeleteClick}
        disabled={isDeleteButtonDisabled}
        variant="brand"
        style="margin-left: 10px;">
      </lightning-button>
    <br>
    <br>
    <div style="width: 100%; height: 50vh;">
      <template if:true={data}>
        <lightning-datatable data={data}
                             columns={columns}
                             key-field="id"
                             sorted-by={sortBy}
                             sorted-direction={sortDirection}
                             onsort={doSorting}
                             onrowselection={handleRowSelection}></lightning-datatable>
      </template>
    </div>

    <div style="text-align: center; background-color: black;">
      <lightning-button
        label="이전"
        onclick={previousPage}
        disabled={isPreviousButtonDisabled}>
      </lightning-button>
      &nbsp;
      <lightning-button
        label="다음"
        onclick={nextPage}
        disabled={isNextButtonDisabled}>
      </lightning-button>
    </div>
  </lightning-card>
</template>